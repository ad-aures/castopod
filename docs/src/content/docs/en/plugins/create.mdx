---
title: Create a Plugin
---

import { FileTree, Steps, Badge } from "@astrojs/starlight/components";

Missing a feature in Castopod? Build it as a plugin and even
[share it with the community](./share)!

In order to get started, you first need to
[set up your Castopod dev environment](https://code.castopod.org/adaures/castopod/-/blob/develop/CONTRIBUTING-DEV.md).

## 1. Create the plugin folder

You'll first need to create your
[plugin folder](./#anatomy-of-a-castopod-plugin) in the `plugins/` directory.

### Using the create command <Badge text="Recommended" size="small" />

To quickly get you started, you can have a folder generated for you using the
following CLI command:

```sh
php spark plugins:create
```

ðŸ‘‰ You will be prompted for metadata and hooks usage in order to have a
personalized skeleton plugin generated for you!

### Manual setup

<Steps>

    1. create a plugin folder inside a vendor directory

        <FileTree>
        - plugins
          - acme // vendor name
            - **hello-world/** // plugin name
          - â€¦

        </FileTree>

    2. add a manifest.json file

        <FileTree>
        - hello-world
          - **manifest.json**

        </FileTree>

          See the [manifest reference](./reference/manifest-json).

    3. add the Plugin.php class

        <FileTree>
        - hello-world
          - manifest.json
          - **Plugin.php**

        </FileTree>

</Steps>

## 2. Build your plugin

Now that your plugin folder is set, you can start working on your plugin's logic
by implementing [the hooks](./reference/hooks) needed.

### Settings forms

You can prompt users for data through settings forms.

These forms can be built declaratively using the
[`settings` attribute](./reference/manifest#settings) in your manifest.

```json
// manifest.json
{
  "settings": {
    "general": {
      "field-key": {
        "type": "text",
        "label": "Enter a text"
      }
    },
    "podcast": {
      "field-key": {
        "type": "text",
        "label": "Enter a text for this podcast"
      }
    },
    "episode": {
      "field-key": {
        "type": "type",
        "label": "Enter a text for this episode"
      }
    }
  }
}
```

This example will generate 3 different settings forms at 3 different levels in
the Castopod admin area:

- `general`: a general form
- `podcast`: a form for each podcast
- `episode`: a form for each episode

You can then access the data (input by the user) via helper methods by
specifying the field key as a parameter:

```php
$this->getGeneralSetting('field-key');

$this->getPodcastSetting($podcast->id, 'field-key');

$this->getEpisodeSetting($episode->id, 'field-key');
```
